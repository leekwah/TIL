##### DI 프레임워크 만들기

##### DI (Dependency Injection)

- 의존성 주입
  -  한 객체가 다른 객체를 사용할 때 의존성이 있다고 한다.
- 런타임 시 의존 관계를 맺는 대상을 외부에서 결정하고 주입해 주는 것이다.
- 스프링 프레임워크는 DI 기능을 지원해주는 프레임워크이다.

##### DI의 장점

- 의존성 주입을 인터페이스 기반으로 설계하면, 코드가 유연해진다.
  - 느슨한 결합도 (loose coupling)
- 변경해 유연해진다.
  - 결합도가 낮은 객체끼리는 부품을 쉽게 갈아끼울 수 있다.

##### build.gradle

```java
plugins {
    id 'java'
}

group = 'org.example'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.reflections:reflections:0.10.2'

    testImplementation 'org.assertj:assertj-core:3.22.0'

    testImplementation platform('org.junit:junit-bom:5.9.1')
    testImplementation 'org.junit.jupiter:junit-jupiter'
}

test {
    useJUnitPlatform()
}
```

##### Controller.annotation

```java
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
public @interface Controller {
}
```

##### Service.annotation

```java
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
public @interface Service {
}
```

##### Inject.annotation

```java
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target({ElementType.CONSTRUCTOR, ElementType.FIELD, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
public @interface Inject {
}
```

##### UserController.java

```java
import org.example.annotation.Controller;
import org.example.annotation.Inject;
import org.example.service.UserService;

@Controller
public class UserController {
    private final UserService userService;

    @Inject
    public UserController(UserService userService) {
        this.userService = userService;
    }
  
  	public UserService getUserSerivce() {
      	return userService;
    }
}
```

- 생성자에 @Inject를 붙인다. 
- UserService를 조회하는 getUserService() 메서드를 생성한다.
- 만약 생성한 @Inject가 제대로 동작한다면 UserService가 null이 아닐 것이다.

##### UserService.java

```java
import org.example.annotation.Service;

@Service
public class UserService {
}
```

