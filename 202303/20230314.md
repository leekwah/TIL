#### SQLD

##### 엔터티(Entity)

- 업무에 필요하고 유용한 정보를 저장하고 관리하기 위한 집합적인 것으로 보이지 않는 개념 또한 포함된다.

##### 엔터티의 특징

- 반드시 해당 업무에서 필요하고 관리하고자하는 정보이여야 한다.
- 유일한 식별자에 의해 식별이 가능해야 한다.
- 영속적으로 존재하는 인스턴스의 집합이어야 한다. ('한 개'가 아니라 '두 개 이상')
- 엔터티는 업무 프로세스에 의해 이용되어야 한다.
- 엔터티는 반드시 속성이 있어야 한다.
- 엔터티는 다른 엔터티와 최소 한 개 이상의 관계가 있어야 한다. (통계성/코드성 엔터티는 관계 생략 가능)

##### 엔터티의 분류

- 유무형에 따른 분류
  - 유형 : 물리적 형태
  - 개념 : 개념적 정보
  - 사건 : 업무 수행 시 발생
- 발생시점에 따른 분류
  - 기본 : 그 업무에 원래 존재하는 정보로 타 엔터티의 부모 역할을 하며, 자신의 고유한 주식별자를 가진다.
  - 중심 : 기본 엔터티로부터 발생하며, 다른 엔터티와의 관계로 많은 행위 엔터티를 생성한다.
  - 행위 : 2개 이상의 부모 엔터티로부터 발생하며, 자주 바뀌거나 양이 증가한다.

##### 엔터티의 명명

- 현업업무에서 사용하는 용어를 사용한다.
- 약어 사용을 금지한다.
- 단수명사를 사용한다.
- 고유한 이름을 사용한다.
- 생성의미대로 부여한다.

##### 속성

- 업무에서 필요로 하는 인스턴스로 관리하고자 하는 의미상 분리되지 않는 최소의 데이터 단위이다.

##### 속성의 구성 방식 분류

- PK(Primary Key)
- FK(Foreign Key)
- 일반 속성

##### 속성의 특성에 따른 분류

- 기본 : 업무로부터 추출한 모든 일반적인 속성이다.
- 설계 : 업무를 규칙화하기 위해 새로 만들거나 변형, 정의하는 속성이다.
- 파생 : 다른 속성에 영향을 받아 발생하는 속성으로 빠른 성능을 낼 수 있도록 원래 속성의 값을 계산되는 속성이며, 적을 수록 좋다.

##### 엔터티, 인스턴스, 속성, 속성값의 관계

- 한 개의 엔터티는 두 개 이상의 인스턴스의 집합이어야 한다.
- 한 개의 엔터티는 두 개 이상의 속성을 갖는다.
- 한 개의 속성은 한 개의 속성값을 갖는다.

##### 도메인

- 속성에 대한 데이터 타입, 크기, 제약사항을 지정하는 것이다.

##### 속성의 명명

- 해당 업무에서 사용하는 이름을 부여한다.
- 서술식 속성명은 사용을 금지한다.
- 약어 사용을 금지한다.
- 구체적으로 명명하여 데이터 모델에서 유일성을 확보한다.

##### 패어링

- 엔터티 안에 인스턴스가 개별적으로 관계를 가지는 것이다.

##### 관계

- 엔터티의 인스턴스 사이의 논리적인 연관성으로서 존재의 형태로나 행위로서 서로에게 연관성이 부여된 상태이다.
- 관계 페어링의 집합이다.

##### UML(통합모델링언어)에서의 관계

- 연관관계(실선) : 항상 이용하는 관계를 의미한다.
- 의존관계(점선) : 상대 행위에 의해 발생하는 관계를 의미한다.

##### 관계의 표기법

- 관계명(Membership) : 엔터티가 관계에 참여하는 형태를 지칭힌다.
  - 관계의 이름
- 관계차수(Cardinality) : 두 개의 엔터티간 관계에서 참여자의 수를 표현하는 것이다.
  - 1:1(ONE TO ONE)
  - 1:M(ONE TO MANY)
  - M:N(MANY TO MANY)
- 관계선택사양(Optionality)
  - 필수관계
  - 선택관계

##### 관계 체크사항

- 두 개의 엔터티 사이에 관심있는 연관규칙이 있는가?
- 두 개의 엔터티 사이에 정보의 조합이 발생되는가?
- 업무기술서, 장표에 관계연결에 대한 규칙이 서술되어 있는가?
- 업무기술서, 장표에 관계연결을 가능케하는 동사가 있는가?

##### 관계 읽기

- 기준 엔터티를 하나 또는 각(Each)으로 읽는다.
- 대상 엔터티의 관계참여도를 읽는다.
- 관계선택사양과 관계명을 읽도록 한다.

##### 식별자

- 엔터티 내에서 인스턴스를 구분하는 구분자이다. 식별자는 논리적, Key는 물리적 데이터 모델링 단계에 사용된다.

##### 식별자의 특징

- 유일성 : 주식별자에 의해 모든 인스턴스들이 유일하게 구분되어야 한다.
- 최소성 : 주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 한다.
- 불변성 : 지정된 주식별자의 값은 자주 변하지 않아야 한다. 만약에 변하면 이전 기록이 말소된다.
- 존재성 : 주식별자가 지정되면 반드시 값이 들어와야한다.

##### 식별자 분류

- 대표성여부
  - 주 : 엔티티 내에서 각 어커런스를 구분할 수 있는 굽준자이며, 타 엔티티와 참조관계를 연결할 수 있는 식별자이다.
  - 보조 : 엔티티 내에서 각 어키어런스를 구분할 수 있는 구분자이나, 대표성을 가지지 못해 참조관계 연결을 하지 못하는 식별자이다.
- 스스로 생성 여부
  - 내부 : 엔티티 내부에서 스스로 만들어지는 식별자이다.
  - 외부 : 타 엔티티와의 관계를 통해 타 엔티티로부터 받아오는 식별자이다.
- 속성의 수
  - 단일 : 하나의 속성으로 구성된 식별자이다.
  - 복합 : 둘 이상의 속성으로 구성된 식별자이다.
- 대체 여부
  - 본질 : 업무에 의해 만들어지는 식별자이다.
  - 인조 : 업무적으로 만들어지지는 않지만 원조식별자가 복잡한 구성을 가지고 있기 때문에 인위적으로 만든 식별자이다.

##### 주식별자 도출기준

- 해당 업무에서 자주 이용되는 속성을 주식별자로 지정하도록 한다.
- 명칭, 내역 등과 같이 이름으로 기술되는 것들은 주식별자로 피한다.
- 속성의 수가 많아지지 않도록 한다.

##### 식별자관계

- 식별자관계 : 부모의 주식별자가 자식엔터티의 주식별자로 상속이 되는 경우를 의미한다.
- 비식별자관계 : 부모엔터티로부터 속성을 받았지만, 일반적인 속성으로만 사용하는 경우가 있다.

##### 비식별자 관계에 의한 외부속성을 생성할 때

- 자식엔터티에서 받은 속성이 반드시 필수가 아니어도 무방하기 때문에 부모 없는 자식이 생성될 수 있는 경우
- 엔터티별로 데이터의 생명주기(Life Cycle)를 다르게 관리할 경우
- 여러 개의 엔터티가 하나의 엔터티로 통합되어 표현되었지만, 각각의 엔터티가 별도의 관계를 가지는 경우
- 자식엔터티에서 별도의 주식별자를 생성하는 것이 더 유리하다고 판단될 경우

##### 식별자 관계로만 설정할 경우의 문제점

- 식별자 관계만으로 연결된 데이터 모델의 특징은 주식별자 속성이 지속적으로 증가할 수 밖에 없는 구조로서 개발자 복잡성과 오류 가능성을 유발시킬 수 있는 요인이 될 수 있다는 사실을 기억해야 한다.

##### 비식별자 관계로만 설정할 경우의 문제점

- 자식엔터티에서 데이터를 처리할 때 쓸데없이 부모엔터티까지 찾아가야 하는 경우가 발생된다. 즉, 불필요한 조인이 다량으로 유발되면서 SQL 구문도 길어지고 성능이 저하되는 현상이 발생한다.
